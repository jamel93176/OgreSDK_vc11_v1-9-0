<html>
<head>
<title>OgreInstanceManager.h Source File - OGRE Documentation</title> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<link type="text/css" rel="stylesheet" href="doxygen.css">
<link type="text/css" rel="stylesheet" href="tabs.css">
</head>
<body>
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_60895d3e9d196336faf5d9dad71ee9d7.html">OgreMain</a></li><li class="navelem"><a class="el" href="dir_9ba68fabe7d45cd05996335e8214ea54.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">OgreInstanceManager.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="OgreInstanceManager_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">This source file is part of OGRE</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    (Object-oriented Graphics Rendering Engine)</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">For the latest info, see http://www.ogre3d.org/</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Copyright (c) 2000-2013 Torus Knot Software Ltd</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a copy</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">of this software and associated documentation files (the &quot;Software&quot;), to deal</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">in the Software without restriction, including without limitation the rights</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included in</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">THE SOFTWARE.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#ifndef __InstanceManager_H__</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define __InstanceManager_H__</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OgrePrerequisites_8h.html">OgrePrerequisites.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OgreMesh_8h.html">OgreMesh.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OgreRenderOperation_8h.html">OgreRenderOperation.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OgreHeaderPrefix_8h.html">OgreHeaderPrefix.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">namespace </span>Ogre</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="code" href="classOgre_1_1InstanceManager.html">   63</a></span>&#160;    <span class="keyword">class </span><a class="code" href="OgrePlatform_8h.html#a20566b1253bae200372ed9162489a663">_OgreExport</a> <a class="code" href="classOgre_1_1InstanceManager.html" title="This is the main starting point for the new instancing system.">InstanceManager</a> : <span class="keyword">public</span> <a class="code" href="classOgre_1_1AllocatedObject.html" title="Superclass for all objects that wish to use custom memory allocators when their new / delete operator...">FactoryAlloc</a></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="code" href="group__Scene.html#ga98fb2a9ada779b56d48f74040e96a622">   66</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="group__Scene.html#ga98fb2a9ada779b56d48f74040e96a622">InstancingTechnique</a></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        {</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622adfd14a6d905e8f639010dceb63fd6a99">   68</a></span>&#160;            <a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622adfd14a6d905e8f639010dceb63fd6a99" title="Any SM 2.0+.">ShaderBased</a>,            </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622aa936e137d1695cec1b763a270dc73a3e">   69</a></span>&#160;            <a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622aa936e137d1695cec1b763a270dc73a3e" title="Needs Vertex Texture Fetch &amp; SM 3.0+.">TextureVTF</a>,             </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622a20f1ebda9178d5f5f4ebe613f3432eac">   70</a></span>&#160;            <a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622a20f1ebda9178d5f5f4ebe613f3432eac" title="Needs SM 3.0+ and HW instancing support.">HWInstancingBasic</a>,      </div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622ac1ad45db6c7bc954c0374c37c8ed1b0d">   71</a></span>&#160;            <a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622ac1ad45db6c7bc954c0374c37c8ed1b0d" title="Needs SM 3.0+, HW instancing support &amp; VTF.">HWInstancingVTF</a>,        </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="code" href="group__Scene.html#gga98fb2a9ada779b56d48f74040e96a622a3efbc531e529142ddfd5c7272a373ece">   72</a></span>&#160;            InstancingTechniquesCount</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        };</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="code" href="group__Scene.html#ga7832eb9e2627f71382fefc7293482508">   76</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="group__Scene.html#ga7832eb9e2627f71382fefc7293482508" title="Values to be used in setSetting() &amp; BatchSettings::setting.">BatchSettingId</a></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        {</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="code" href="group__Scene.html#gga7832eb9e2627f71382fefc7293482508a4fa34122dba5df1604cd9cd44ee1c519">   79</a></span>&#160;            CAST_SHADOWS        = 0,</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="code" href="group__Scene.html#gga7832eb9e2627f71382fefc7293482508a5aa5845eaa01e5c54fc92fc74b2f4176">   81</a></span>&#160;            <a class="code" href="group__Scene.html#gga7832eb9e2627f71382fefc7293482508a5aa5845eaa01e5c54fc92fc74b2f4176" title="Makes each batch to display it&#39;s bounding box. Useful for debugging or profiling.">SHOW_BOUNDINGBOX</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="code" href="group__Scene.html#gga7832eb9e2627f71382fefc7293482508a93252cb20077bbc127c02d96f5d696f0">   83</a></span>&#160;            NUM_SETTINGS</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        };</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="code" href="structOgre_1_1InstanceManager_1_1BatchSettings.html">   87</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structOgre_1_1InstanceManager_1_1BatchSettings.html">BatchSettings</a></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="comment">//These are all per material</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="code" href="group__Scene.html#ga2c32100efe26093807424d2032f66464">   90</a></span>&#160;            <span class="keywordtype">bool</span> setting[NUM_SETTINGS];</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="code" href="group__Scene.html#gad9b21aa78c94911add2c52c474d8d48c">   92</a></span>&#160;            <a class="code" href="structOgre_1_1InstanceManager_1_1BatchSettings.html">BatchSettings</a>()</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                setting[CAST_SHADOWS]     = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                setting[SHOW_BOUNDINGBOX] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        };</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="code" href="group__Scene.html#ga38c19279985051c8c65d6df62bfb8f86">   99</a></span>&#160;        <span class="keyword">typedef</span> <a class="code" href="structOgre_1_1vector.html">vector&lt;InstanceBatch*&gt;::type</a>        <a class="code" href="group__Scene.html#ga38c19279985051c8c65d6df62bfb8f86">InstanceBatchVec</a>;   <span class="comment">//vec[batchN] = Batch</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="code" href="group__Scene.html#ga2ee4131bd90f78a8f66acb0649e830ee">  100</a></span>&#160;        <span class="keyword">typedef</span> <a class="code" href="structOgre_1_1map.html">map&lt;String, InstanceBatchVec&gt;::type</a> <a class="code" href="group__Scene.html#ga2ee4131bd90f78a8f66acb0649e830ee">InstanceBatchMap</a>;   <span class="comment">//map[materialName] = Vec</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="code" href="group__Scene.html#gafb62bc67a8ccd5ce513811585cecffd9">  102</a></span>&#160;        <span class="keyword">typedef</span> <a class="code" href="structOgre_1_1map.html">map&lt;String, BatchSettings&gt;::type</a>    <a class="code" href="group__Scene.html#gafb62bc67a8ccd5ce513811585cecffd9">BatchSettingsMap</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="code" href="group__Scene.html#ga01ab189e423504ec998421dff23f9644">  104</a></span>&#160;        <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a>            <a class="code" href="group__Scene.html#ga01ab189e423504ec998421dff23f9644">mName</a>;                  <span class="comment">//Not the name of the mesh</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="code" href="group__Scene.html#ga2da3cbab89cc6405d656acc508c3f7c8">  105</a></span>&#160;        <a class="code" href="classOgre_1_1SharedPtr.html">MeshPtr</a>                 <a class="code" href="group__Scene.html#ga2da3cbab89cc6405d656acc508c3f7c8">mMeshReference</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="code" href="group__Scene.html#ga9d5879cee81bbc67cdfaf64524bd2169">  106</a></span>&#160;        <a class="code" href="group__Scene.html#ga2ee4131bd90f78a8f66acb0649e830ee">InstanceBatchMap</a>        <a class="code" href="group__Scene.html#ga9d5879cee81bbc67cdfaf64524bd2169">mInstanceBatches</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="code" href="group__Scene.html#ga7d4ce97e2f3705998d7722f1c92a766e">  107</a></span>&#160;        <span class="keywordtype">size_t</span>                  <a class="code" href="group__Scene.html#ga7d4ce97e2f3705998d7722f1c92a766e">mIdCount</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="code" href="group__Scene.html#ga40e25e0d974bc9cb8fdafef707618d57">  109</a></span>&#160;        <a class="code" href="group__Scene.html#ga38c19279985051c8c65d6df62bfb8f86">InstanceBatchVec</a>        <a class="code" href="group__Scene.html#ga40e25e0d974bc9cb8fdafef707618d57">mDirtyBatches</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="code" href="group__Scene.html#ga05e37e984cb6aad0278e5201080c6584">  111</a></span>&#160;        <a class="code" href="classOgre_1_1RenderOperation.html" title="&#39;New&#39; rendering operation using vertex buffers.">RenderOperation</a>         <a class="code" href="group__Scene.html#ga05e37e984cb6aad0278e5201080c6584">mSharedRenderOperation</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="code" href="group__Scene.html#ga3b584885553efad689ce7f0b006bb6fe">  113</a></span>&#160;        <span class="keywordtype">size_t</span>                  <a class="code" href="group__Scene.html#ga3b584885553efad689ce7f0b006bb6fe">mInstancesPerBatch</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="code" href="group__Scene.html#gad52ab17fc279b813acca218429a8b9d5">  114</a></span>&#160;        <a class="code" href="group__Scene.html#ga98fb2a9ada779b56d48f74040e96a622">InstancingTechnique</a>     <a class="code" href="group__Scene.html#gad52ab17fc279b813acca218429a8b9d5">mInstancingTechnique</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="code" href="group__Scene.html#ga1d827707f203bd601ecd178717cd9f95">  115</a></span>&#160;        <a class="code" href="namespaceOgre.html#aa8263b218e7d187ad5ef03a73a6ad7fd">uint16</a>                  <a class="code" href="group__Scene.html#ga1d827707f203bd601ecd178717cd9f95">mInstancingFlags</a>;       </div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="code" href="group__Scene.html#gac2afda10e925bbfe4edd50cf7352b66e">  116</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>          <a class="code" href="group__Scene.html#gac2afda10e925bbfe4edd50cf7352b66e">mSubMeshIdx</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        </div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="code" href="group__Scene.html#ga86b59263bf4bac17d33c4365c65c9e37">  118</a></span>&#160;        <a class="code" href="group__Scene.html#gafb62bc67a8ccd5ce513811585cecffd9">BatchSettingsMap</a>        <a class="code" href="group__Scene.html#ga86b59263bf4bac17d33c4365c65c9e37">mBatchSettings</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="code" href="group__Scene.html#ga31cedf671001b7363491c9facbf95745">  119</a></span>&#160;        <a class="code" href="classOgre_1_1SceneManager.html" title="Manages the organisation and rendering of a &#39;scene&#39; i.e.">SceneManager</a>*           <a class="code" href="group__Scene.html#ga31cedf671001b7363491c9facbf95745">mSceneManager</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="code" href="group__Scene.html#ga13f71a588460dab9f41c300311af87a6">  121</a></span>&#160;        <span class="keywordtype">size_t</span>                  <a class="code" href="group__Scene.html#ga13f71a588460dab9f41c300311af87a6">mMaxLookupTableInstances</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="code" href="group__Scene.html#gad61ffc7b850b06a8a50afd8add4d575c">  122</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>           <a class="code" href="group__Scene.html#gad61ffc7b850b06a8a50afd8add4d575c">mNumCustomParams</a>;       <span class="comment">//Number of custom params per instance.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keyword">inline</span> <a class="code" href="classOgre_1_1InstanceBatch.html" title="InstanceBatch forms part of the new Instancing system This is an abstract class that must be derived ...">InstanceBatch</a>* getFreeBatch( <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;materialName );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="classOgre_1_1InstanceBatch.html" title="InstanceBatch forms part of the new Instancing system This is an abstract class that must be derived ...">InstanceBatch</a>* buildNewBatch( <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;materialName, <span class="keywordtype">bool</span> firstTime );</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordtype">void</span> defragmentBatches( <span class="keywordtype">bool</span> optimizeCull, <a class="code" href="structOgre_1_1vector.html">vector&lt;InstancedEntity*&gt;::type</a> &amp;entities,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                <a class="code" href="structOgre_1_1vector.html#a5e5f8d7fb74dbc2b426c18e1f7b22323">vector&lt;Ogre::Vector4&gt;::type</a> &amp;usedParams,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                <a class="code" href="group__Scene.html#ga38c19279985051c8c65d6df62bfb8f86">InstanceBatchVec</a> &amp;fragmentedBatches );</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordtype">void</span> applySettingToBatches( <a class="code" href="group__Scene.html#ga7832eb9e2627f71382fefc7293482508" title="Values to be used in setSetting() &amp; BatchSettings::setting.">BatchSettingId</a> <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> value, <span class="keyword">const</span> <a class="code" href="group__Scene.html#ga38c19279985051c8c65d6df62bfb8f86">InstanceBatchVec</a> &amp;container );</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordtype">void</span> unshareVertices(<span class="keyword">const</span> <a class="code" href="classOgre_1_1SharedPtr.html">Ogre::MeshPtr</a> &amp;mesh);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="classOgre_1_1InstanceManager.html" title="This is the main starting point for the new instancing system.">InstanceManager</a>( <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;customName, <a class="code" href="classOgre_1_1SceneManager.html" title="Manages the organisation and rendering of a &#39;scene&#39; i.e.">SceneManager</a> *sceneManager,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                         <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;meshName, <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;groupName,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                         <a class="code" href="group__Scene.html#ga98fb2a9ada779b56d48f74040e96a622">InstancingTechnique</a> instancingTechnique, <a class="code" href="namespaceOgre.html#aa8263b218e7d187ad5ef03a73a6ad7fd">uint16</a> instancingFlags,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                         <span class="keywordtype">size_t</span> instancesPerBatch, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> subMeshIdx, <span class="keywordtype">bool</span> useBoneMatrixLookup = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keyword">virtual</span> ~<a class="code" href="classOgre_1_1InstanceManager.html" title="This is the main starting point for the new instancing system.">InstanceManager</a>();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="code" href="group__Scene.html#gaa0ac29a317cd26fd5b83b18598b081b4">  163</a></span>&#160;        <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a>&amp; <a class="code" href="group__Scene.html#gaa0ac29a317cd26fd5b83b18598b081b4">getName</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mName; }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="code" href="group__Scene.html#gaf7bb87472913de383a0f4b9b96e5195b">  165</a></span>&#160;        <a class="code" href="classOgre_1_1SceneManager.html" title="Manages the organisation and rendering of a &#39;scene&#39; i.e.">SceneManager</a>* <a class="code" href="group__Scene.html#gaf7bb87472913de383a0f4b9b96e5195b">getSceneManager</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mSceneManager; }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordtype">void</span> setInstancesPerBatch( <span class="keywordtype">size_t</span> instancesPerBatch );</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordtype">void</span> setMaxLookupTableInstances( <span class="keywordtype">size_t</span> maxLookupTableInstances );</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordtype">void</span> setNumCustomParams( <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> numCustomParams );</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="code" href="group__Scene.html#ga65553e92ff3ee0ac596162118b4686ca">  204</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> getNumCustomParams()<span class="keyword"> const</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keyword">        </span>{ <span class="keywordflow">return</span> mNumCustomParams; }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="code" href="group__Scene.html#ga7fe112c8fa27ba082e1df84216274261">  208</a></span>&#160;        <a class="code" href="group__Scene.html#ga98fb2a9ada779b56d48f74040e96a622">InstancingTechnique</a> getInstancingTechnique()<span class="keyword"> const</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keyword">        </span>{ <span class="keywordflow">return</span> mInstancingTechnique; }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordtype">size_t</span> getMaxOrBestNumInstancesPerBatch( <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> materialName, <span class="keywordtype">size_t</span> suggestedSize, <a class="code" href="namespaceOgre.html#aa8263b218e7d187ad5ef03a73a6ad7fd">uint16</a> flags );</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="classOgre_1_1InstancedEntity.html">InstancedEntity</a>* createInstancedEntity( <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;materialName );</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordtype">void</span> cleanupEmptyBatches(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordtype">void</span> defragmentBatches( <span class="keywordtype">bool</span> optimizeCulling );</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordtype">void</span> setSetting( BatchSettingId <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> enabled, <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;materialName = <a class="code" href="classOgre_1_1StringUtil.html#ad2ead745c8c6f4f7056270e22f29e4da" title="Constant blank string, useful for returning by ref where local does not exist.">StringUtil::BLANK</a> );</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordtype">bool</span> getSetting( BatchSettingId <span class="keywordtype">id</span>, <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;materialName ) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="code" href="group__Scene.html#ga5fe7226ee5363b1b369d684d15af519f">  283</a></span>&#160;        <span class="keywordtype">bool</span> hasSettings( <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;materialName )<span class="keyword"> const</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keyword">        </span>{ <span class="keywordflow">return</span> mBatchSettings.find( materialName ) != mBatchSettings.end(); }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordtype">void</span> setBatchesAsStaticAndUpdate( <span class="keywordtype">bool</span> bStatic );</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordtype">void</span> _addDirtyBatch( <a class="code" href="classOgre_1_1InstanceBatch.html" title="InstanceBatch forms part of the new Instancing system This is an abstract class that must be derived ...">InstanceBatch</a> *dirtyBatch );</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordtype">void</span> _updateDirtyBatches(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="code" href="group__Scene.html#ga449864e9fe068c83c3955dfcc112a2d1">  297</a></span>&#160;        <span class="keyword">typedef</span> <a class="code" href="classOgre_1_1ConstMapIterator.html" title="Concrete IteratorWrapper for const access to the underlying key-value container.">ConstMapIterator&lt;InstanceBatchMap&gt;</a> <a class="code" href="group__Scene.html#ga449864e9fe068c83c3955dfcc112a2d1">InstanceBatchMapIterator</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="code" href="group__Scene.html#ga81a850f3da3dc22baa6d8fbd68a1723f">  298</a></span>&#160;        <span class="keyword">typedef</span> <a class="code" href="classOgre_1_1ConstVectorIterator.html" title="Concrete IteratorWrapper for const access to the underlying container.">ConstVectorIterator&lt;InstanceBatchVec&gt;</a> <a class="code" href="group__Scene.html#ga81a850f3da3dc22baa6d8fbd68a1723f">InstanceBatchIterator</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="code" href="group__Scene.html#ga865be521d280fc4daed5bbf0484ab65f">  301</a></span>&#160;        <a class="code" href="classOgre_1_1ConstMapIterator.html" title="Concrete IteratorWrapper for const access to the underlying key-value container.">InstanceBatchMapIterator</a> getInstanceBatchMapIterator(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keyword">        </span>{ <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1ConstMapIterator.html" title="Concrete IteratorWrapper for const access to the underlying key-value container.">InstanceBatchMapIterator</a>( mInstanceBatches.begin(), mInstanceBatches.end() ); }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="code" href="group__Scene.html#ga5f829261ff3c96310308825bfc5ebe0b">  310</a></span>&#160;        <a class="code" href="classOgre_1_1ConstVectorIterator.html" title="Concrete IteratorWrapper for const access to the underlying container.">InstanceBatchIterator</a> getInstanceBatchIterator( <span class="keyword">const</span> <a class="code" href="namespaceOgre.html#af73bbdc8bed8a3e6fcd56bb8fa188c45">String</a> &amp;materialName )<span class="keyword"> const</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="keyword">        </span>{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            InstanceBatchMap::const_iterator it = mInstanceBatches.find( materialName );</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">if</span>(it != mInstanceBatches.end())</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classOgre_1_1ConstVectorIterator.html" title="Concrete IteratorWrapper for const access to the underlying container.">InstanceBatchIterator</a>( it-&gt;second.begin(), it-&gt;second.end() );</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <a class="code" href="group__General.html#ga6d8a74980f0e08e2a912cddc19be0fcd">OGRE_EXCEPT</a>(<a class="code" href="classOgre_1_1Exception.html#a9bdf9b8a0a83b95818d676848beaa29ba9d61f90f76dd3e119d608876ea5f7957">Exception::ERR_INVALID_STATE</a>, <span class="stringliteral">&quot;Cannot create instance batch iterator. &quot;</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                            <span class="stringliteral">&quot;Material &quot;</span> + materialName + <span class="stringliteral">&quot; cannot be found.&quot;</span>, <span class="stringliteral">&quot;InstanceManager::getInstanceBatchIterator&quot;</span>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    };</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;} <span class="comment">// namespace Ogre</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OgreHeaderSuffix_8h.html">OgreHeaderSuffix.h</a>&quot;</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#endif // __InstanceManager_H__</span></div>
</div><!-- fragment --></div><!-- contents -->
<hr>
<p>
Copyright &copy; 2012 Torus Knot Software Ltd<br />
<!--Creative Commons License--><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.<br/>
		<!--/Creative Commons License--><!-- <rdf:RDF xmlns="http://web.resource.org/cc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
		<Work rdf:about="">
			<license rdf:resource="http://creativecommons.org/licenses/by-sa/2.5/" />
	<dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
		</Work>
		<License rdf:about="http://creativecommons.org/licenses/by-sa/2.5/"><permits rdf:resource="http://web.resource.org/cc/Reproduction"/><permits rdf:resource="http://web.resource.org/cc/Distribution"/><requires rdf:resource="http://web.resource.org/cc/Notice"/><requires rdf:resource="http://web.resource.org/cc/Attribution"/><permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/><requires rdf:resource="http://web.resource.org/cc/ShareAlike"/></License></rdf:RDF> -->
Last modified Mon Nov 25 2013 22:27:52
</p>
</body>
</html>
